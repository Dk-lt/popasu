@page "/"
@inject UsersApi UsersApi
@inject ClassroomsApi ClassroomsApi
@inject MaterialItemsApi MaterialItemsApi

<PageTitle>–ì–ª–∞–≤–Ω–∞—è</PageTitle>

<div class="dashboard-container">
    <div class="dashboard-header">
        <div class="header-content">
            <h1 class="page-title">
                <span class="title-icon">üìä</span>
                –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            </h1>
            <p class="page-subtitle">–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã —É—á–µ—Ç–∞ –∏–º—É—â–µ—Å—Ç–≤–∞</p>
        </div>
    </div>

    <div class="dashboard-grid modern-grid">
        <div class="dashboard-card modern-dashboard-card">
            <div class="dashboard-card-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                üë•
            </div>
            <div class="dashboard-card-content">
                <h3 class="dashboard-card-title">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                <p class="dashboard-card-count">@userCount</p>
                <p class="dashboard-card-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
                <a href="users" class="btn btn-dashboard">
                    –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ <span>‚Üí</span>
                </a>
            </div>
        </div>

        <div class="dashboard-card modern-dashboard-card">
            <div class="dashboard-card-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                üèõÔ∏è
            </div>
            <div class="dashboard-card-content">
                <h3 class="dashboard-card-title">–ê—É–¥–∏—Ç–æ—Ä–∏–∏</h3>
                <p class="dashboard-card-count">@classroomCount</p>
                <p class="dashboard-card-label">–í—Å–µ–≥–æ –∞—É–¥–∏—Ç–æ—Ä–∏–π</p>
                <a href="classrooms" class="btn btn-dashboard">
                    –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ <span>‚Üí</span>
                </a>
            </div>
        </div>

        <div class="dashboard-card modern-dashboard-card">
            <div class="dashboard-card-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                üì¶
            </div>
            <div class="dashboard-card-content">
                <h3 class="dashboard-card-title">–ú–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã</h3>
                <p class="dashboard-card-count">@materialItemCount</p>
                <p class="dashboard-card-label">–í—Å–µ–≥–æ –æ–±—ä–µ–∫—Ç–æ–≤</p>
                <a href="materialitems" class="btn btn-dashboard">
                    –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ <span>‚Üí</span>
                </a>
            </div>
        </div>
    </div>
</div>

@code {
    private int userCount = 0;
    private int classroomCount = 0;
    private int materialItemCount = 0;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var users = await UsersApi.GetAllAsync();
            userCount = users.Count;

            var classrooms = await ClassroomsApi.GetAllAsync();
            classroomCount = classrooms.Count;

            var items = await MaterialItemsApi.GetAllAsync();
            materialItemCount = items.Count;
        }
        catch
        {
            // Ignore errors on dashboard
        }
    }
}

